<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up – VaultX</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

    <style>
        :root{
          --primary:#1f2a8a;
          --accent:#22c55e;
          --text:#0f172a;
          --muted:#64748b;
          --border:#e5e7eb;
        }

        *{
          box-sizing:border-box;
          margin:0;
          padding:0;
        }

        body{
          min-height:100vh;
          font-family:'Inter', sans-serif;
          background:
            linear-gradient(
              90deg,
              rgba(15,23,42,.45),
              rgba(15,23,42,.25)
            ),
            url("bglogin.jpg"); /* reuse or change image */
          background-size:cover;
          background-position:center;
          background-attachment:fixed;
          display:flex;
          align-items:center;
          justify-content:center;
          color:var(--text);
        }

        /* ================= CONTAINER ================= */

        .container{
          width:100%;
          max-width:440px;

          background: rgba(255,255,255,0.78);
          backdrop-filter: blur(14px);
          -webkit-backdrop-filter: blur(14px);

          border-radius:20px;
          box-shadow:
            0 40px 80px rgba(0,0,0,.35),
            inset 0 1px 0 rgba(255,255,255,.4);

          border:1px solid rgba(255,255,255,.35);
          padding:40px 36px;
        }

        /* ================= HEADER ================= */

        .brand{
          text-align:center;
          margin-bottom:26px;
        }

        .brand h1{
          font-family:'Space Grotesk', sans-serif;
          font-size:32px;
          margin-bottom:6px;
        }

        .brand p{
          font-size:14px;
          color:var(--muted);
        }

        /* ================= FORM ================= */

        .form-group{
          margin-bottom:16px;
        }

        label{
          display:block;
          font-size:14px;
          font-weight:500;
          margin-bottom:6px;
        }

        input, select{
          width:100%;
          padding:14px;
          border-radius:12px;
          border:1px solid var(--border);
          font-size:14.5px;
          outline:none;
          transition:border .2s, box-shadow .2s;
        }

        input:focus, select:focus{
          border-color:var(--primary);
          box-shadow:0 0 0 3px rgba(31,42,138,.15);
        }

        /* ================= BUTTON ================= */

        button{
          width:100%;
          margin-top:12px;
          padding:14px;
          border:none;
          border-radius:14px;
          background:var(--accent);
          color:white;
          font-size:15px;
          font-weight:600;
          cursor:pointer;
          transition:transform .2s, box-shadow .2s;
        }

        button:hover{
          transform:translateY(-2px);
          box-shadow:0 10px 25px rgba(34,197,94,.35);
        }

        /* ================= MESSAGE ================= */

        .message{
          display:none;
          margin-bottom:15px;
          padding:12px;
          border-radius:12px;
          font-size:14px;
        }

        .message.success{
          background:#dcfce7;
          color:#166534;
        }

        .message.error{
          background:#fee2e2;
          color:#991b1b;
        }

        .message.show{
          display:block;
        }

        /* ================= LINKS ================= */

        .links{
          margin-top:22px;
          text-align:center;
          font-size:14px;
        }

        .links a{
          color:var(--primary);
          text-decoration:none;
          font-weight:500;
        }

        .links a:hover{
          text-decoration:underline;
        }

        .footer{
          margin-top:26px;
          text-align:center;
          font-size:12.5px;
          color:var(--muted);
        }
    </style>
</head>

<body>

<div class="container">

    <div class="brand">
        <h1>VaultX</h1>
        <p>Create your banking account</p>
    </div>

    <div id="signupMessage" class="message"></div>

    <form id="signupForm">
        <div class="form-group">
            <label>Full Name</label>
            <input type="text" id="signupName" placeholder="Enter your full name" required>
        </div>

        <div class="form-group">
            <label>Username</label>
            <input type="text" id="signupUsername" placeholder="Choose a username" required>
        </div>

        <div class="form-group">
            <label>Email</label>
            <input type="email" id="signupEmail" placeholder="Enter your email" required>
        </div>

        <div class="form-group">
            <label>Password</label>
            <input type="password" id="signupPassword" placeholder="Create a password" required>
        </div>

        <div class="form-group">
            <label>Role</label>
            <select id="signupRole" required>
                <option value="">Select role</option>
                <option value="customer">Customer</option>
                <option value="admin">Admin</option>
            </select>
        </div>

        <button type="submit">Create Account</button>
    </form>

    <div class="links">
        Already have an account? <a href="login.html">Login</a><br><br>
        <a href="home.html">← Back to home</a>
    </div>

    <div class="footer">
        Built with Spring Boot & REST APIs<br>
        Varad Khadilkar
    </div>

</div>

<script>
    const API_URL = window.location.origin;

    function showMessage(msg, type){
      const el = document.getElementById('signupMessage');
      el.innerText = msg;
      el.className = `message ${type} show`;
    }

    document.getElementById('signupForm').addEventListener('submit', async (e)=>{
      e.preventDefault();

      const data = {
        name: signupName.value,
        username: signupUsername.value,
        email: signupEmail.value,
        password: signupPassword.value,
        role: signupRole.value
      };

      try{
        const res = await fetch(`${API_URL}/register`,{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify(data)
        });

        const result = (await res.text()).trim();

        if(result === "Successful"){
          showMessage("Account created successfully! Redirecting…","success");
          setTimeout(()=>{
            window.location.href = "login.html";
          }, 900);
        }else{
          showMessage(result,"error");
        }
      }catch{
        showMessage("Server error. Try again later.","error");
      }
    });
</script>

</body>
</html>
